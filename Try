from datetime import datetime
import json

# --- ‚õΩÔ∏è –ö–ª–∞—Å—Å –¢–æ–ø–ª–∏–≤–∞ (Fuel) ---
class Fuel:
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞ —Å –µ–≥–æ —Ü–µ–Ω–æ–π –∏ –∑–∞–ø–∞—Å–æ–º."""
    def __init__(self, name, price_per_liter, stock_liters):
        self.name = name
        self.price = price_per_liter  # –¶–µ–Ω–∞ –∑–∞ –ª–∏—Ç—Ä
        self.stock = stock_liters     # –¢–µ–∫—É—â–∏–π –∑–∞–ø–∞—Å –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏

    def get_price(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É."""
        return self.price

    def update_stock(self, amount_sold):
        """–£–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–ø–∞—Å —Ç–æ–ø–ª–∏–≤–∞ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏."""
        if self.stock >= amount_sold:
            self.stock -= amount_sold
            return True
        else:
            return False

# --- üè¢ –ö–ª–∞—Å—Å –ó–∞–ø—Ä–∞–≤–æ—á–Ω–æ–π –°—Ç–∞–Ω—Ü–∏–∏ (Gas Station) ---
class GasStation:
    """–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ê–ó–°."""
    def __init__(self, name):
        self.name = name
        self.fuel_inventory = {}  # –°–ª–æ–≤–∞—Ä—å: –∏–º—è —Ç–æ–ø–ª–∏–≤–∞ -> –æ–±—ä–µ–∫—Ç Fuel
        self.transactions = []    # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

    def add_fuel(self, fuel_obj):
        """–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å."""
        self.fuel_inventory[fuel_obj.name] = fuel_obj

    def display_prices(self):
        """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã –Ω–∞ —Ç–æ–ø–ª–∏–≤–æ."""
        print(f"\n--- –¶–µ–Ω—ã –Ω–∞ —Ç–æ–ø–ª–∏–≤–æ –≤ {self.name} ---")
        for name, fuel in self.fuel_inventory.items():
            print(f"| {name:<10}: {fuel.price:.2f} —Ä—É–±./–ª–∏—Ç—Ä | (–û—Å—Ç–∞—Ç–æ–∫: {fuel.stock:.0f} –ª)")
        print("-" * 34)

    def process_transaction(self, fuel_name, volume_liters):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∑–∞–ø—Ä–∞–≤–∫–∏.
        :param fuel_name: –ù–∞–∑–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–ø–ª–∏–≤–∞
        :param volume_liters: –û–±—ä–µ–º –≤ –ª–∏—Ç—Ä–∞—Ö
        :return: –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–ª–∏ None, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.
        """
        if fuel_name not in self.fuel_inventory:
            print(f"‚ùå –û—à–∏–±–∫–∞: –¢–æ–ø–ª–∏–≤–æ '{fuel_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.")
            return None

        fuel = self.fuel_inventory[fuel_name]

        if not fuel.update_stock(volume_liters):
            print(f"‚ùå –û—à–∏–±–∫–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–ø–∞—Å–∞ —Ç–æ–ø–ª–∏–≤–∞ '{fuel_name}'. –î–æ—Å—Ç—É–ø–Ω–æ: {fuel.stock:.0f} –ª.")
            return None

        total_cost = volume_liters * fuel.get_price()
        
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        transaction = {
            "timestamp": datetime.now().isoformat(),
            "fuel": fuel_name,
            "volume_liters": volume_liters,
            "price_per_liter": fuel.get_price(),
            "total_cost": total_cost
        }
        self.transactions.append(transaction)

        print(f"\n--- –ß–ï–ö ---")
        print(f"–¢–æ–ø–ª–∏–≤–æ: {fuel_name}")
        print(f"–û–±—ä–µ–º: {volume_liters:.2f} –ª")
        print(f"–¶–µ–Ω–∞/–ª: {fuel.get_price():.2f} —Ä—É–±.")
        print
